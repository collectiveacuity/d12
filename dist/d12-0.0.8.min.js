/*!
* @name D12
* @description A Platonic Solid for Ideal Data
* @author rcj1492
* @license MIT
* @version 0.0.7
* @copyright 2018-2019 Collective Acuity 
* @email support@collectiveacuity.com
* @url https://github.com/collectiveacuity/d12
*/
"use strict";"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isString=isString;exports.isNumber=isNumber;exports.isBoolean=isBoolean;exports.isPlainObject=isPlainObject;exports.isArray=isArray;exports.isInteger=isInteger;exports.isObjectLike=isObjectLike;exports.isDate=isDate;exports.isFunction=isFunction;exports.ingestObject=ingestObject;exports.ingestString=ingestString;exports.ingestBoolean=ingestBoolean;exports.ingestArray=ingestArray;exports.ingestInteger=ingestInteger;exports.ingestNumber=ingestNumber;exports.ingestMap=ingestMap;exports.objectSize=objectSize;exports.ingestOptions=ingestOptions;exports.deepCopy=deepCopy;exports.emptyObject=emptyObject;exports.joinWords=joinWords;exports.parseDiff=parseDiff;exports.upsertValues=upsertValues;exports.validateString=validateString;exports.validateData=validateData;exports.parseURL=parseURL;var _isString2=_interopRequireDefault(require("lodash/isString"));var _isNumber2=_interopRequireDefault(require("lodash/isNumber"));var _isBoolean2=_interopRequireDefault(require("lodash/isBoolean"));var _isPlainObject2=_interopRequireDefault(require("lodash/isPlainObject"));var _isArray2=_interopRequireDefault(require("lodash/isArray"));var _isInteger2=_interopRequireDefault(require("lodash/isInteger"));var _isObjectLike2=_interopRequireDefault(require("lodash/isObjectLike"));var _isDate2=_interopRequireDefault(require("lodash/isDate"));var _isFunction2=_interopRequireDefault(require("lodash/isFunction"));var _get2=_interopRequireDefault(require("lodash/get"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _typeof(e){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function e(t){return typeof t}}else{_typeof=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return _typeof(e)}function isString(e){return(0,_isString2["default"])(e)}function isNumber(e){return(0,_isNumber2["default"])(e)}function isBoolean(e){return(0,_isBoolean2["default"])(e)}function isPlainObject(e){return(0,_isPlainObject2["default"])(e)}function isArray(e){return(0,_isArray2["default"])(e)}function isInteger(e){return(0,_isInteger2["default"])(e)}function isObjectLike(e){return(0,_isObjectLike2["default"])(e)}function isDate(e){return(0,_isDate2["default"])(e)}function isFunction(e){return(0,_isFunction2["default"])(e)}function ingestObject(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(t){return isPlainObject((0,_get2["default"])(e,t))?e:{}}else{return isPlainObject(e)?e:{}}}function ingestString(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(t){return isString((0,_get2["default"])(e,t))?e:""}else{return isString(e)?e:""}}function ingestBoolean(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(t){return isBoolean((0,_get2["default"])(e,t))?e:false}else{return isBoolean(e)?e:false}}function ingestArray(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(t){return isArray((0,_get2["default"])(e,t))?e:[]}else{return isArray(e)?e:[]}}function ingestInteger(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(t){return isInteger((0,_get2["default"])(e,t))?e:0}else{return isInteger(e)?e:0}}function ingestNumber(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(t){return isNumber((0,_get2["default"])(e,t))?e:0}else{return isNumber(e)?e:0}}function ingestMap(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(t){return isPlainObject((0,_get2["default"])(e,t))?e:{}}else{return isPlainObject(e)?e:{}}}function objectSize(e){return Object.keys(ingestObject(e)).length}function ingestOptions(e,t){e=ingestMap(e);function i(e,t){var n={};if(!objectSize(t)){for(var s in e){n[s]=e[s]}}else{for(var a in t){if(a in e){if(_typeof(e[a])===_typeof(t[a])){if(isArray(e[a])){n[a]=r(e[a],t[a])}else if(isPlainObject(e[a])){n[a]=i(e[a],t[a])}else{n[a]=e[a]}}else{n[a]=t[a]}}else if(isArray(t[a])){n[a]=[]}else if(isPlainObject(t[a])){n[a]=i({},t[a])}else{n[a]=t[a]}}}return n}function r(e,t){var n=[];var s=null;try{s=t[0]}catch(e){}for(var a=0;a<e.length;a++){if(s==null){n.push(e)}else{if(_typeof(e[a])===_typeof(s)){if(isArray(e[a])){n.push(r(e[a],s))}else if(isPlainObject(e[a])){n.push(i(e[a],s))}else{n.push(e[a])}}}}return n}return i(e,t)}function deepCopy(e){if(e==null||!isObjectLike(e)){return e}else{if(isDate(e)){return e}var t=e.constructor();for(var i in e){if(e.hasOwnProperty(i))t[i]=deepCopy(e[i])}return t}}function emptyObject(e){for(var t in e){if(e.hasOwnProperty(t)){e[t]=null;delete e[t]}}}function joinWords(e,t){var i={conjunction:"and",prefix:"",suffix:""};var r=ingestOptions(t,i);var n="";for(var s=0;s<e.length;s++){if(n){if(s+1===e.length){n+=" "+r.conjunction+" "}else{n+=", "}}n+=r.prefix+e[s]+r.suffix}return n}function parseDiff(e,t){function i(e,t){var r={};for(var n in e){if(n in t){if(e[n]==null&&t[n]!=null){r[n]=e[n]}else if(isPlainObject(e[n])){if(isPlainObject(t[n])){var s=i(e[n],t[n]);if(objectSize(s)){r[n]=s}}else{r[n]=e[n]}}else if(e[n]!==t[n]){r[n]=e[n]}}else{r[n]=e[n]}}for(var a in t){if(!(a in e)){r[a]=null}}return r}var r={altered:ingestObject(e),original:ingestObject(t),parsed:{}};if(objectSize(r.altered)){r.parsed=i(r.altered,r.original)}return r.parsed}function upsertValues(e,t){function i(e,t){for(var r in e){if(e[r]==null&&r in t){delete t[r]}else if(isPlainObject(e[r])){if(r in t&&isPlainObject(t[r])){t[r]=i(e[r],t[r])}else{t[r]=e[r]}}else{t[r]=e[r]}}return t}var r={upsert:deepCopy(ingestObject(e)),existing:deepCopy(ingestObject(t)),updated:{}};if(objectSize(r.upsert)){r.updated=i(r.upsert,r.existing)}return r.updated}function validateString(e,t,i){var r={order:"must_contain,equal_to,min_length,discrete_values,must_not_contain,max_length,excluded_values"};var n=ingestOptions(i,r);var s={must_contain:{},must_not_contain:{},equal_to:{},max_length:0,min_length:0,discrete_values:[""],excluded_values:[""]};var a=ingestOptions(t,s);var u={required:"",prohibited:""};function o(){for(var t in a.must_contain){var i=new RegExp(t,"i");if(!i.test(e)){return a.must_contain[t]}}}function l(){for(var t in a.equal_to){if(t!==e){return a.equal_to[t]}}}function f(){if(a.min_length){if(e.length<a.min_length){return"must contain at least "+a.min_length.toString()+" characters"}}}function c(){if(a.discrete_values.length){if(a.discrete_values.indexOf(e)===-1){var t=joinWords(a.discrete_values,{conjunction:"or",prefix:'"',suffix:'"'});return"may only be "+t}}}function p(){for(var t in a.must_not_contain){var i=new RegExp(t,"i");if(i.test(e)){return a.must_not_contain[t]}}}function d(){if(a.max_length){if(e.length>a.max_length){return"cannot contain more than "+a.max_length.toString()+" characters"}}}function g(){if(a.excluded_values.length){if(a.excluded_values.indexOf(e)>-1){var t=joinWords(a.excluded_values,{conjunction:"or",prefix:'"',suffix:'"'});return"cannot be "+t}}}var _={must_contain:o,must_not_contain:p,equal_to:l,max_length:d,min_length:f,discrete_values:c,excluded_values:g};var v={must_contain:"required",must_not_contain:"prohibited",equal_to:"required",max_length:"prohibited",min_length:"required",discrete_values:"required",excluded_values:"prohibited"};var h=n.order.split(",");var b=[];var m=[];for(var x=0;x<h.length;x++){var y=h[x];if(y in _){m.push(y);b.push(_[y])}}for(var j=0;j<b.length;j++){var O=b[j]();if(O){var q=m[j];if(v[q]==="required"){u.required=O}else if(v[q]==="prohibited"){u.prohibited=O}return u}}return u}function validateData(e,t,i){var r={order:"must_contain,equal_to,min_length,discrete_values,must_not_contain,max_length,excluded_values"};var n=ingestOptions(i,r);var s={required:"",prohibited:""};var a=ingestString(t.datatype);if(a==="string"){if(isString(e)){return validateString(e,t,n)}else{s.required="must be a string datatype.";return s}}return s}function parseURL(e){var t={};var i=true;var r,n,s,a,u;var o,l,f,c,p,d,g;if(isString(e)){g=e.match(/(^https?)\:\/\/([^\/?#]+)(?:[\/?#]|$)/i)}else{throw new TypeError("url arg must be a string")}var _=g?g[1]:null;var v=g?g[2]:null;if(!_){t.protocol=e}if(v){var h=v.match(/(.*)@(.*)/);if(h){n=h[1];s=h[2]}else{s=v}if(n){var b=n.match(/(.*):(.*)/);a=b?b[1]:null;u=b?b[2]:null;if(!b){t.userinfo=n}}var m=s.match(/(.*):(.*)/);o=m?m[1]:s;if(m){l=parseInt(m[2])?parseInt(m[2]):null;if(!l){t.port=m[2]}}}else{t.authority=e}if(o){if(!o.match(/\./)){t.tld=o}else if(o.match(/^\./)||o.match(/\.$/)){t.host=o}}if(v){var x=".*"+v.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var y=new RegExp(x);d=e.replace(y,"");if(d){var j;var O=d.indexOf("?");var q=d.indexOf("#");if(O===-1&&q===-1){f=d}else if(O===-1){j=d.split("#");f=j[0];p=j[1]}else if(q===-1){j=d.split("?");f=j[0];c=j[1]}else{var S=Math.min(O,q);var D="";if(S){f=d.slice(0,S);D=d.slice(S)}else{D=d}if(O<q){j=D.split("#");c=j[0].slice(1);p=j[1]}else{j=D.split("?");p=j[0].slice(1);c=j[1];t.fragment=d}}if(!f||f==="/"){f=undefined}}}if(_&&v){r="".concat(_,"://").concat(v)}if(Object.keys(t).length){i=false}return{absolute:r,protocol:_,user:a,password:u,host:o,port:l,path:f,query:c,fragment:p,errors:t,valid:i}}