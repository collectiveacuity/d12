/*!
* @name D12
* @description A Platonic Solid for Ideal Data
* @author rcj1492
* @license MIT
* @version 0.0.9
* @copyright 2018-2021 Collective Acuity 
* @email support@collectiveacuity.com
* @url https://github.com/collectiveacuity/d12
*/
"use strict";"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isString=isString;exports.isNumber=isNumber;exports.isBoolean=isBoolean;exports.isPlainObject=isPlainObject;exports.isArray=isArray;exports.isInteger=isInteger;exports.isObjectLike=isObjectLike;exports.isDate=isDate;exports.isFunction=isFunction;exports.ingestObject=ingestObject;exports.ingestString=ingestString;exports.ingestBoolean=ingestBoolean;exports.ingestArray=ingestArray;exports.ingestInteger=ingestInteger;exports.ingestNumber=ingestNumber;exports.ingestMap=ingestMap;exports.objectSize=objectSize;exports.ingestOptions=ingestOptions;exports.deepCopy=deepCopy;exports.emptyObject=emptyObject;exports.joinWords=joinWords;exports.parseDiff=parseDiff;exports.upsertValues=upsertValues;exports.validateString=validateString;exports.validateData=validateData;exports.parseURL=parseURL;var _isString2=_interopRequireDefault(require("lodash/isString"));var _isNumber2=_interopRequireDefault(require("lodash/isNumber"));var _isBoolean2=_interopRequireDefault(require("lodash/isBoolean"));var _isPlainObject2=_interopRequireDefault(require("lodash/isPlainObject"));var _isArray2=_interopRequireDefault(require("lodash/isArray"));var _isInteger2=_interopRequireDefault(require("lodash/isInteger"));var _isObjectLike2=_interopRequireDefault(require("lodash/isObjectLike"));var _isDate2=_interopRequireDefault(require("lodash/isDate"));var _isFunction2=_interopRequireDefault(require("lodash/isFunction"));var _get2=_interopRequireDefault(require("lodash/get"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(!e)return;if(typeof e==="string")return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(e,t)}function _iterableToArray(e){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,i=new Array(t);r<t;r++){i[r]=e[r]}return i}function _typeof(e){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function e(t){return typeof t}}else{_typeof=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return _typeof(e)}function isString(e){return(0,_isString2["default"])(e)}function isNumber(e){return(0,_isNumber2["default"])(e)}function isBoolean(e){return(0,_isBoolean2["default"])(e)}function isPlainObject(e){return(0,_isPlainObject2["default"])(e)}function isArray(e){return(0,_isArray2["default"])(e)}function isInteger(e){return(0,_isInteger2["default"])(e)}function isObjectLike(e){return(0,_isObjectLike2["default"])(e)}function isDate(e){return(0,_isDate2["default"])(e)}function isFunction(e){return(0,_isFunction2["default"])(e)}function ingestObject(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(t){return isPlainObject((0,_get2["default"])(e,t))?e:{}}else{return isPlainObject(e)?e:{}}}function ingestString(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(t){return isString((0,_get2["default"])(e,t))?e:""}else{return isString(e)?e:""}}function ingestBoolean(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(t){return isBoolean((0,_get2["default"])(e,t))?e:false}else{return isBoolean(e)?e:false}}function ingestArray(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(t){return isArray((0,_get2["default"])(e,t))?e:[]}else{return isArray(e)?e:[]}}function ingestInteger(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(t){return isInteger((0,_get2["default"])(e,t))?e:0}else{return isInteger(e)?e:0}}function ingestNumber(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(t){return isNumber((0,_get2["default"])(e,t))?e:0}else{return isNumber(e)?e:0}}function ingestMap(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(t){return isPlainObject((0,_get2["default"])(e,t))?e:{}}else{return isPlainObject(e)?e:{}}}function objectSize(e){return Object.keys(ingestObject(e)).length}function ingestOptions(e,t){e=ingestMap(e);function r(e,t){var n={};if(!objectSize(t)){for(var a in e){n[a]=e[a]}}else{for(var s in t){if(s in e){if(_typeof(e[s])===_typeof(t[s])){if(isArray(e[s])){n[s]=i(e[s],t[s])}else if(isPlainObject(e[s])){n[s]=r(e[s],t[s])}else{n[s]=e[s]}}else if(t[s]===null){n[s]=e[s]}else{n[s]=t[s]}}else if(isArray(t[s])){n[s]=[]}else if(isPlainObject(t[s])){n[s]=r({},t[s])}else{n[s]=t[s]}}}return n}function i(e,t){var n=[];var a=null;try{a=t[0]}catch(e){}for(var s=0;s<e.length;s++){if(a==null){n.push.apply(n,_toConsumableArray(e));break}else{if(_typeof(e[s])===_typeof(a)){if(isArray(e[s])){n.push(i(e[s],a))}else if(isPlainObject(e[s])){n.push(r(e[s],a))}else{n.push(e[s])}}}}return n}return r(e,t)}function deepCopy(e){if(e==null||!isObjectLike(e)){return e}else{if(isDate(e)){return e}var t=e.constructor();for(var r in e){if(e.hasOwnProperty(r))t[r]=deepCopy(e[r])}return t}}function emptyObject(e){for(var t in e){if(e.hasOwnProperty(t)){e[t]=null;delete e[t]}}}function joinWords(e,t){var r={conjunction:"and",prefix:"",suffix:""};var i=ingestOptions(t,r);var n="";for(var a=0;a<e.length;a++){if(n){if(a+1===e.length){n+=" "+i.conjunction+" "}else{n+=", "}}n+=i.prefix+e[a]+i.suffix}return n}function parseDiff(e,t){function r(e,t){var i={};for(var n in e){if(n in t){if(e[n]==null&&t[n]!=null){i[n]=e[n]}else if(isPlainObject(e[n])){if(isPlainObject(t[n])){var a=r(e[n],t[n]);if(objectSize(a)){i[n]=a}}else{i[n]=e[n]}}else if(e[n]!==t[n]){i[n]=e[n]}}else{i[n]=e[n]}}for(var s in t){if(!(s in e)){i[s]=null}}return i}var i={altered:ingestObject(e),original:ingestObject(t),parsed:{}};if(objectSize(i.altered)){i.parsed=r(i.altered,i.original)}return i.parsed}function upsertValues(e,t){function r(e,t){for(var i in e){if(e[i]==null&&i in t){delete t[i]}else if(isPlainObject(e[i])){if(i in t&&isPlainObject(t[i])){t[i]=r(e[i],t[i])}else{t[i]=e[i]}}else{t[i]=e[i]}}return t}var i={upsert:deepCopy(ingestObject(e)),existing:deepCopy(ingestObject(t)),updated:{}};if(objectSize(i.upsert)){i.updated=r(i.upsert,i.existing)}return i.updated}function validateString(e,t,r){var i={order:"must_contain,equal_to,min_length,discrete_values,must_not_contain,max_length,excluded_values"};var n=ingestOptions(r,i);var a={must_contain:{},must_not_contain:{},equal_to:{},max_length:0,min_length:0,discrete_values:[""],excluded_values:[""]};var s=ingestOptions(t,a);var o={required:"",prohibited:""};function u(){for(var t in s.must_contain){var r=new RegExp(t,"i");if(!r.test(e)){return s.must_contain[t]}}}function l(){for(var t in s.equal_to){if(t!==e){return s.equal_to[t]}}}function f(){if(s.min_length){if(e.length<s.min_length){return"must contain at least "+s.min_length.toString()+" characters"}}}function c(){if(s.discrete_values.length){if(s.discrete_values.indexOf(e)===-1){var t=joinWords(s.discrete_values,{conjunction:"or",prefix:'"',suffix:'"'});return"may only be "+t}}}function p(){for(var t in s.must_not_contain){var r=new RegExp(t,"i");if(r.test(e)){return s.must_not_contain[t]}}}function d(){if(s.max_length){if(e.length>s.max_length){return"cannot contain more than "+s.max_length.toString()+" characters"}}}function g(){if(s.excluded_values.length){if(s.excluded_values.indexOf(e)>-1){var t=joinWords(s.excluded_values,{conjunction:"or",prefix:'"',suffix:'"'});return"cannot be "+t}}}var _={must_contain:u,must_not_contain:p,equal_to:l,max_length:d,min_length:f,discrete_values:c,excluded_values:g};var v={must_contain:"required",must_not_contain:"prohibited",equal_to:"required",max_length:"prohibited",min_length:"required",discrete_values:"required",excluded_values:"prohibited"};var b=n.order.split(",");var y=[];var h=[];for(var m=0;m<b.length;m++){var x=b[m];if(x in _){h.push(x);y.push(_[x])}}for(var j=0;j<y.length;j++){var O=y[j]();if(O){var S=h[j];if(v[S]==="required"){o.required=O}else if(v[S]==="prohibited"){o.prohibited=O}return o}}return o}function validateData(e,t,r){var i={order:"must_contain,equal_to,min_length,discrete_values,must_not_contain,max_length,excluded_values"};var n=ingestOptions(r,i);var a={required:"",prohibited:""};var s=ingestString(t.datatype);if(s==="string"){if(isString(e)){return validateString(e,t,n)}else{a.required="must be a string datatype.";return a}}return a}function parseURL(e){var t={};var r=true;var i,n,a,s,o;var u,l,f,c,p,d,g;if(isString(e)){g=e.match(/(^https?)\:\/\/([^\/?#]+)(?:[\/?#]|$)/i)}else{throw new TypeError("url arg must be a string")}var _=g?g[1]:null;var v=g?g[2]:null;if(!_){t.protocol=e}if(v){var b=v.match(/(.*)@(.*)/);if(b){n=b[1];a=b[2]}else{a=v}if(n){var y=n.match(/(.*):(.*)/);s=y?y[1]:null;o=y?y[2]:null;if(!y){t.userinfo=n}}var h=a.match(/(.*):(.*)/);u=h?h[1]:a;if(h){l=parseInt(h[2])?parseInt(h[2]):null;if(!l){t.port=h[2]}}}else{t.authority=e}if(u){if(!u.match(/\./)){t.tld=u}else if(u.match(/^\./)||u.match(/\.$/)){t.host=u}}if(v){var m=".*"+v.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var x=new RegExp(m);d=e.replace(x,"");if(d){var j;var O=d.indexOf("?");var S=d.indexOf("#");if(O===-1&&S===-1){f=d}else if(O===-1){j=d.split("#");f=j[0];p=j[1]}else if(S===-1){j=d.split("?");f=j[0];c=j[1]}else{var q=Math.min(O,S);var A="";if(q){f=d.slice(0,q);A=d.slice(q)}else{A=d}if(O<S){j=A.split("#");c=j[0].slice(1);p=j[1]}else{j=A.split("?");p=j[0].slice(1);c=j[1];t.fragment=d}}if(!f||f==="/"){f=undefined}}}if(_&&v){i="".concat(_,"://").concat(v)}if(Object.keys(t).length){r=false}return{absolute:i,scheme:_,user:s,password:o,host:u,port:l,path:f,query:c,fragment:p,errors:t,valid:r}}